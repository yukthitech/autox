<html>
<head>
	<style>
		table
		{
			border: solid black 1px;
			border-collapse: collapse;
			margin-left: 20px;
		}
		
		table td
		{
			border: solid black 1px;
			padding: 5px;
		}
		
		table th
		{
			border: solid black 1px;
			padding: 5px;
			background-color: rgb(200, 200, 200);
		}
		
		.highlight
		{
			color: blue;
			font-weight: bold;
		}
	</style>
</head>
<body style="padding: 10px;">
	<h1>Selecting Nodes</h1>

	<p>XPath uses path expressions to select nodes in an XML document.
		The node is selected by following a path or steps. The most useful
		path expressions are listed below:</p>
		<br/>
		
	<table>
		<tbody>
			<tr>
				<th style="width: 25%">Expression</th>
				<th>Description</th>
			</tr>
			<tr>
				<td><i>nodename</i></td>
				<td>Selects all nodes with the name "<i>nodename</i>"
				</td>
			</tr>
			<tr>
				<td>/</td>
				<td>Selects from the root node</td>
			</tr>
			<tr>
				<td>//</td>
				<td>Selects nodes in the document from the current node that
					match the selection no matter where they are</td>
			</tr>
			<tr>
				<td>.</td>
				<td>Selects the current node</td>
			</tr>
			<tr>
				<td>..</td>
				<td>Selects the parent of the current node</td>
			</tr>
			<tr>
				<td>@</td>
				<td>Selects attributes</td>
			</tr>
		</tbody>
	</table>

	<!-- ****************************************************************** -->
	<h1>Predicates</h1>

	<p>
		Predicates are used to find a specific node or a node that contains a
		specific value.<br /> Predicates are always embedded in square
		brackets.<br /> In the table below we have listed some path
		expressions with predicates and the result of the expressions:
	</p>
	<br />

	<table>
		<tbody>
			<tr>
				<th style="width: 40%">Path Expression</th>
				<th>Result</th>
			</tr>
			<tr>
				<td>/bookstore/book[1]</td>
				<td>Selects the first book element that is the child of the bookstore element.<br/>
					<span class="highlight">Index in xpath starts from 1 (not from zero).</span>
				</td>
			</tr>
			<tr>
				<td>/bookstore/book[last()]</td>
				<td>Selects the last book element that is the child of the
					bookstore element</td>
			</tr>
			<tr>
				<td>/bookstore/book[last()-1]</td>
				<td>Selects the last but one book element that is the child of
					the bookstore element</td>
			</tr>
			<tr>
				<td>/bookstore/book[position()&lt;3]</td>
				<td>Selects the first two book elements that are children of
					the bookstore element</td>
			</tr>
			<tr>
				<td>//title[@lang]</td>
				<td>Selects all the title elements that have an attribute named
					lang</td>
			</tr>
			<tr>
				<td>//title[@lang='en']</td>
				<td>Selects all the title elements that have a "lang" attribute
					with a value of "en"</td>
			</tr>
			<tr>
				<td>/bookstore/book[price&gt;35.00]</td>
				<td>Selects all the book elements of the bookstore element that
					have a price element with a value greater than 35.00</td>
			</tr>
			<tr>
				<td>/bookstore/book[price&gt;35.00]/title</td>
				<td>Selects all the title elements of the book elements of the
					bookstore element that have a price element with a value greater
					than 35.00</td>
			</tr>
			<tr>
				<td>/lst[contains(.,'two')]</td>
				<td>Used to point to an element in list of elements. Eg: ["one", "two", "three"]</td>
			</tr>
		</tbody>
	</table>

	<!-- ****************************************************************** -->
	<h1>Selecting Unknown Nodes</h1>

	<p>XPath wildcards can be used to select unknown XML nodes.</p>
	<br />
	<table>
		<tbody>
			<tr>
				<th style="width: 25%">Wildcard</th>
				<th>Description</th>
			</tr>
			<tr>
				<td>*</td>
				<td>Matches any element node</td>
			</tr>
			<tr>
				<td>@*</td>
				<td>Matches any attribute node</td>
			</tr>
			<tr>
				<td>node()</td>
				<td>Matches any node of any kind</td>
			</tr>
		</tbody>
	</table>
	<br />
	<br />

	<table>
		<tbody>
			<tr>
				<th style="width: 25%">Path Expression</th>
				<th>Result</th>
			</tr>
			<tr>
				<td>/bookstore/*</td>
				<td>Selects all the child element nodes of the bookstore
					element</td>
			</tr>
			<tr>
				<td>//*</td>
				<td>Selects all elements in the document</td>
			</tr>
			<tr>
				<td>//title[@*]</td>
				<td>Selects all title elements which have at least one
					attribute of any kind</td>
			</tr>
		</tbody>
	</table>

	<!-- ****************************************************************** -->
	<h1>Selecting Several Paths</h1>

	<p>
		By using the | operator in an XPath expression you can select several
		paths.<br /> In the table below we have listed some path expressions
		and the result of the expressions:
	</p>
	<br />
	
	<table>
		<tbody>
			<tr>
				<th style="width: 40%">Path Expression</th>
				<th>Result</th>
			</tr>
			<tr>
				<td>//book/title | //book/price</td>
				<td>Selects all the title AND price elements of all book
					elements</td>
			</tr>
			<tr>
				<td>//title | //price</td>
				<td>Selects all the title AND price elements in the document</td>
			</tr>
			<tr>
				<td>/bookstore/book/title | //price</td>
				<td>Selects all the title elements of the book element of the
					bookstore element AND all the price elements in the document</td>
			</tr>
		</tbody>
	</table>
	
	<br/><br/><br/>
	<!-- ****************************************************************** -->
	<h1>Special cases</h1>

	<p>
		In jxpath in a map, value of a key can :
	</p>
	<br />
	
	<table>
		<tbody>
			<tr>
				<th style="width: 40%">Use Case</th>
				<th>Description</th>
				<th>Solution</th>
			</tr>
			
			<tr>
				<td>
					Accessing bean property "name" in attribute conditions like [@name='xyz'] will not work
				</td>
				<td>
					@name in jxpath is used to specify a key to access an element in a map. Eg:<br/>
					&nbsp;&nbsp;&nbsp;&nbsp;<b>map[@name='key1']</b> will access map-element with key "key1"<br><br>
				</td>
				<td>
					In order to access "name" property of a bean, use ./name instead of @name, as shown below
					&nbsp;&nbsp;&nbsp;&nbsp;<b>/attr/workflowSteps/steps[./name='Step1']</b>
				</td>
			</tr>
		</tbody>
	</table>
	<br/><br/><br/>
</body>
</html>
